<!DOCTYPE html>

<!-- CPSC583 PROJECT 3
Tina Huynh
10131151
-->

<meta charset="utf-8">
<style>

h1{
font-family: Gill Sans, Verdana;
 font-size: 30px;
 line-height: 24px;
 text-transform: uppercase;
 letter-spacing: -3px;
 color: #ff6666;
}

h2{ 
 font-family: "Lucida Grande", Tahoma;
 font-size: 10px;
 font-weight: lighter;
 font-variant: normal;
 text-transform: uppercase;
 color: #262626;
 margin-top: 10px;
 letter-spacing: 0.3em;
 padding-left: 20em;
 padding-right: 20em;
}

text{
 font-family: "Lucida Grande", Tahoma;
 font-size: 9px;
 font-weight: lighter;
 font-variant: normal;
 text-transform: uppercase;
 color: #262626;
 letter-spacing: 0.1em;
}
.mainBars rect{
  shape-rendering: auto;
  fill-opacity: 0;
  stroke-width: 0.5px;
  stroke: rgb(0, 0, 0);
  stroke-opacity: 0;
}
.subBars{
    shape-rendering:crispEdges;
}
.edges{
    stroke:none;
    fill-opacity:0.5;
}
.header{
    text-anchor:middle;
    font-size:16px;
}
line{
    stroke:#FF4F5A;
}
.node {
  cursor: pointer;
  stroke: #3182bd;
  stroke-width: 1.5px;
}

.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1px;
}

</style>

<body style="background-color: #fffaf2"><br/>
<h1 align="center"> MY SPENDING HABITS </h1>
<h2 align="center">This tool visualizes my personal spending habits over the course of six months from January 2017 to June 2017. Measured in Canadian dollars ($), the following statistics include how much I have spent each month (and on what), the specific transactions, and my personal budget goal for that month.</h2>
<h2 align="right">Tina Huynh</h2>

<div id="node" style="float: right; width: 500px; height:560px; position: relative; padding-right: 4em; margin-top: 6em;"></div>

<script src="//d3js.org/d3.v3.min.js"></script>
<script>

var width = 500,
    height = 500,
    root;

var force = d3.layout.force()
    .size([width, height])
    .on("tick", tick);

var svg = d3.select("#node").append("svg")
    .attr("width", width)
    .attr("height", height);

var link = svg.selectAll(".link"),
    node = svg.selectAll(".node");

d3.json("data.json", function(error, json) {
  if (error) throw error;

  root = json;
  update();
});

function update() {
  var nodes = flatten(root),
      links = d3.layout.tree().links(nodes);

  // Restart the force layout.
  force
      .nodes(nodes)
      .links(links)
      .start();

  // Update the links…
  link = link.data(links, function(d) { return d.target.id; });

  // Exit any old links.
  link.exit().remove();

  // Enter any new links.
  link.enter().insert("line", ".node")
      .attr("class", "link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  // Update the nodes…
  node = node.data(nodes, function(d) { return d.id; }).style("fill", color);

  // Exit any old nodes.
  node.exit().remove();

  // Enter any new nodes.
  node.enter().append("circle")
      .attr("class", "node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", function(d) { return Math.sqrt(d.size) / 10 || 4.5; })
      .style("fill", color)
      .on("click", click)
      .call(force.drag);
}

function tick() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}

// Color leaf nodes orange, and packages white or blue.
function color(d) {
  return d._children ? "#3182bd" : d.children ? "#c6dbef" : "#fd8d3c";
}

// Toggle children on click.
function click(d) {
  if (!d3.event.defaultPrevented) {
    if (d.children) {
      d._children = d.children;
      d.children = null;
    } else {
      d.children = d._children;
      d._children = null;
    }
    update();
  }
}

// Returns a list of all nodes under the root.
function flatten(root) {
  var nodes = [], i = 0;

  function recurse(node) {
    if (node.children) node.children.forEach(recurse);
    if (!node.id) node.id = ++i;
    nodes.push(node);
  }

  recurse(root);
  return nodes;
}

</script>

<script src="js/d3.v4.js"></script>
  <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="js/visis.js"></script>

<div id="bar" style="float:left; position: relative;"></div>

  <script  src="js/assn3.js"></script></div>

</body>